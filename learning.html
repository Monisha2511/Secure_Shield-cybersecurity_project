<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learning - SecureShield</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { background-color: #0d1117; color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .learning-container { max-width: 1000px; margin: 0 auto; padding: 2rem; }
    .course-header { border-bottom: 2px solid #3a86ff; padding-bottom: 1rem; margin-bottom: 2rem; }
    .module-card { background-color: #161b22; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; }
    .module-header { padding: 1rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
    .module-content { padding: 0 1rem; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; background-color: #1c2129; }
    .module-content.expanded { max-height: 5000px; padding: 1rem; }
    .progress-bar { height: 8px; background-color: #3a86ff; width: 0%; transition: width 0.5s ease; }
    .content-item { margin-bottom: 1.5rem; padding: 1rem; background-color: #24292e; border-radius: 6px; }
    .complete-btn { margin-top: 10px; }
    .quiz-container { background-color: #2d333b; padding: 1rem; border-radius: 6px; margin-bottom: 1rem; }
    .video-placeholder { background-color: #2d333b; height: 300px; display: flex; align-items: center; justify-content: center; border-radius: 6px; margin-bottom: 1rem; }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <i class="fas fa-shield-alt me-2"></i>SecureShield
      </a>
    </div>
  </nav>

  <div class="learning-container">
    <div class="course-header">
      <h1>Learning: <span id="courseTitle"></span></h1>
      <p class="lead">Expand your cybersecurity knowledge with this course</p>
      <div class="progress mt-3" style="height: 8px;">
        <div class="progress-bar" role="progressbar" id="courseProgress"></div>
      </div>
      <small id="progressText" class="mt-1 d-block">0% Complete</small>
    </div>

    <div class="course-content">
      <div class="alert alert-info">
        <strong>Course Overview:</strong> This course will teach you essential cybersecurity concepts and practices to protect yourself and your organization from digital threats.
      </div>

      <h3>Course Modules</h3>
      <div id="modulesContainer"><!-- Modules will load here --></div>

      <div class="mt-4">
        <a href="index.html" class="btn btn-outline-light">Return to Home</a>
      </div>
    </div>
  </div>

  <script>
    // -------------------------------
    // Parse Course Name from URL
    // -------------------------------
    const params = new URLSearchParams(window.location.search);
    const courseName = params.get("course") || "Cybersecurity Basics";

    // -------------------------------
    // Course Data (trimmed for demo)
    // -------------------------------
    const courseData = {
      "Cybersecurity Basics": {
        modules: [
          {
            title: "Introduction to Cybersecurity",
            completed: false,
            content: [
              { type: "text", title: "What is Cybersecurity?", content: "Cybersecurity refers to protecting systems, networks, and programs from attacks." },
              { type: "video", title: "Cybersecurity Fundamentals", content: "Introduction video to cybersecurity principles." }
            ]
          },
          {
            title: "Types of Cyber Threats",
            completed: false,
            content: [
              { type: "text", title: "Malware", content: "Malicious software that causes harm." },
              { type: "quiz", title: "Knowledge Check", questions: [
                { question: "Most common malware delivery?", options: ["Email", "USB", "SMS"], answer: 0 }
              ]}
            ]
          }
        ]
      }
      // ðŸ‘‰ You can add Phishing Awareness + Password Management modules here (your big dataset)
    };

    // -------------------------------
    // Initialize Page
    // -------------------------------
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("courseTitle").textContent = courseName;
      initializeCourse(courseName);
      updateProgress();
    });

    // -------------------------------
    // Functions
    // -------------------------------
    function initializeCourse(courseName) {
      const course = courseData[courseName];
      if (!course) {
        document.getElementById('modulesContainer').innerHTML =
          '<div class="alert alert-danger">Course not found.</div>';
        return;
      }
      let html = "";
      course.modules.forEach((module, index) => {
        html += `
          <div class="module-card">
            <div class="module-header" onclick="toggleModule(${index})">
              <h5 class="mb-0">Module ${index+1}: ${module.title}</h5>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="module-content" id="module-${index}">
              ${renderModuleContent(module.content)}
              <button class="btn btn-success complete-btn" onclick="completeModule(${index})">Mark Complete</button>
            </div>
          </div>`;
      });
      document.getElementById("modulesContainer").innerHTML = html;
    }

    function renderModuleContent(content) {
      let html = "";
      content.forEach((item) => {
        if (item.type === "text") {
          html += `<div class="content-item"><h5>${item.title}</h5><p>${item.content}</p></div>`;
        } else if (item.type === "video") {
          html += `<div class="content-item"><h5>${item.title}</h5>
                   <div class="video-placeholder"><i class="fas fa-video fa-2x"></i><p class="ms-2">${item.content}</p></div></div>`;
        } else if (item.type === "quiz") {
          html += `<div class="content-item"><h5>${item.title}</h5><div class="quiz-container">${renderQuiz(item.questions)}</div></div>`;
        }
      });
      return html;
    }

    function renderQuiz(questions) {
      return questions.map((q, i) => `
        <div class="quiz-question mb-3">
          <p><strong>${i+1}. ${q.question}</strong></p>
          ${q.options.map((opt, j) => `
            <div class="form-check">
              <input class="form-check-input" type="radio" name="q${i}" value="${j}">
              <label class="form-check-label">${opt}</label>
            </div>`).join("")}
        </div>`).join("") + `<button class="btn btn-primary" onclick="checkQuiz(this)">Check</button>`;
    }

    function toggleModule(index) {
      const el = document.getElementById(`module-${index}`);
      el.classList.toggle("expanded");
      const icon = el.previousElementSibling.querySelector("i");
      icon.classList.toggle("fa-chevron-down");
      icon.classList.toggle("fa-chevron-up");
    }

    function completeModule(index) {
      let progress = JSON.parse(localStorage.getItem(`progress-${courseName}`) || "{}");
      progress[index] = true;
      localStorage.setItem(`progress-${courseName}`, JSON.stringify(progress));
      updateProgress();
      alert("Module marked complete!");
    }

    function updateProgress() {
      const course = courseData[courseName];
      if (!course) return;
      const completed = JSON.parse(localStorage.getItem(`progress-${courseName}`) || "{}");
      const done = Object.keys(completed).length;
      const total = course.modules.length;
      const percent = Math.round((done / total) * 100);
      document.getElementById("courseProgress").style.width = percent + "%";
      document.getElementById("progressText").textContent = `${percent}% Complete (${done}/${total})`;
    }

    function checkQuiz(btn) {
      alert("Quiz checked (static demo).");
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
